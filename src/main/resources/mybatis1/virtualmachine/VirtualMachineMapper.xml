<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="VirtualMachineMapper">
	<!--表名 -->
	<sql id="tableName">
		t_virtualmachine
	</sql>
	
	<!-- 字段 -->
	<sql id="fieldName">
		id,
		user,
		project_id,
		name,
		ip,
		cpu,
		memory,
		datadisk,
		status,
		hostmachine_id,
		platform,
		os,
		os_status,
		soft,
		soft_status,
		duedate,
		username,
		password,
		gmt_create,
		gmt_modified
	</sql>
	
	
	<!-- 字段值 -->
	<sql id="fieldValue">
		#{id},
		#{user},
		#{projectId},
		#{name},
		#{ip},
		#{cpu},
		#{memory},
		#{datadisk},
		#{status},
		#{hostmachineId},
		#{platform},
		#{os},
		#{osStatus},
		#{soft},
		#{softStatus},
		#{duedate},
		#{username},
		#{password},
		#{gmt_create},
		#{gmt_modified}
	</sql>
	
	<!-- 字段 -->
	<sql id="saveFieldName">
		user,
		project_id,
		name,
		ip,
		cpu,
		memory,
		datadisk,
		status,
		hostmachine_id,
		platform,
		os,
		os_status,
		soft,
		soft_status,
		duedate,
		username,
		password
	</sql>
	
	<sql id="saveFieldValue">
		#{user},
		#{projectId},
		#{name},
		#{ip},
		#{cpu},
		#{memory},
		#{datadisk},
		#{status},
		#{hostmachineId},
		#{platform},
		#{os},
		#{osStatus},
		#{soft},
		#{softStatus},
		#{duedate},
		#{username},
		#{password}
	</sql>
	
	<!-- 新增 -->
	<insert id="save"  useGeneratedKeys="true" keyProperty="id"  parameterType="com.cmp.sid.VirtualMachine" >
		insert into <include refid="tableName"/> (
			<include refid="saveFieldName"/>
		) values (
			<include refid="saveFieldValue"/>
		)
	</insert>
	
	<!-- 通过ID 查询 -->
	<select id="findById" resultType="com.cmp.sid.VirtualMachine" parameterType="String">
		select * from  <include refid="tableName"/> where id = #{id}
	</select>
	
	<!-- 通过ID 查询 -->
	<select id="findByUser" resultType="com.cmp.sid.VirtualMachine" parameterType="String">
		select * from  <include refid="tableName"/> where user = #{user}
	</select>
	
</mapper>